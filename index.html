<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HesLab Finans</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
 font-family:Arial;
 background:#f2f2f2;
 text-align:center;
 padding:20px;
 transition:.3s;
}

.kutu{
 background:white;
 max-width:420px;
 margin:15px auto;
 padding:20px;
 border-radius:12px;
 box-shadow:0 0 10px rgba(0,0,0,.1);
}

button,input{
 width:90%;
 padding:10px;
 margin:6px;
 border-radius:6px;
 border:1px solid #ccc;
}

button{
 background:#1e88e5;
 color:white;
 border:none;
 cursor:pointer;
}

h2{color:#1e88e5}

#darkBtn{
 position:fixed;
 top:15px;
 right:15px;
 background:#333;
 color:white;
 border:none;
 padding:10px 14px;
 border-radius:20px;
 cursor:pointer;
}

#owner{
 position:fixed;
 bottom:10px;
 right:12px;
 font-size:12px;
 color:#777;
 opacity:.7;
}

.dark{
 background:#121212;
 color:white;
}
.dark .kutu{background:#1e1e1e}
.dark h2{color:#00bcd4}
.dark button{background:#00bcd4}
.dark #owner{color:#aaa}

@media(max-width:600px){
 .kutu{max-width:95%}
 button,input{width:95%}
}
</style>
</head>

<body>

<button id="darkBtn" onclick="darkToggle()">ðŸŒ™</button>

<div class="kutu">
<h2>CanlÄ± Kurlar</h2>
<p>Dolar: <span id="usd">YÃ¼kleniyor...</span></p>
<p>Euro: <span id="eur">YÃ¼kleniyor...</span></p>
</div>

<div class="kutu">
<canvas id="grafik" height="200"></canvas>
</div>

<div class="kutu">
<h2>Kredi Hesaplama</h2>
<input id="tutar" placeholder="Tutar">
<input id="faiz" placeholder="Faiz %">
<input id="vade" placeholder="Ay">
<button onclick="hesapla()">Hesapla</button>
<p id="sonuc"></p>
</div>

<div id="owner">Owner: Yunus GÃ¼mele</div>

<script>
let fiyatlar=[];
let zamanlar=[];
let chart;

function grafikBaslat(){
 const ctx=document.getElementById("grafik");
 chart=new Chart(ctx,{
  type:"line",
  data:{
   labels:zamanlar,
   datasets:[{
    label:"USD/TRY",
    data:fiyatlar,
    borderWidth:2,
    tension:.3
   }]
  }
 });
}

async function kurGetir(){
 const r=await fetch("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/usd.json");
 const d=await r.json();

 const usdTry=d.usd.try;
 const eurRate=d.usd.eur;

 usd.innerText=usdTry.toFixed(2)+" TL";
 eur.innerText=(usdTry/eurRate).toFixed(2)+" TL";

 zamanlar.push(new Date().toLocaleTimeString());
 fiyatlar.push(usdTry);

 if(zamanlar.length>12){
  zamanlar.shift();
  fiyatlar.shift();
 }

 chart.update();
}

function hesapla(){
 let t=+tutar.value;
 let f=+faiz.value/100;
 let v=+vade.value;
 let aylik=(t+(t*f*v))/v;
 sonuc.innerText="AylÄ±k Ã¶deme: "+aylik.toFixed(2)+" TL";
}

function darkToggle(){
 document.body.classList.toggle("dark");
}

grafikBaslat();
kurGetir();
setInterval(kurGetir,10000);
</script>

</body>
</html>
